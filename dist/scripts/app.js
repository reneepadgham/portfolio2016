var Router=Backbone.Router.extend({initialize:function(e){this.$app=e.app,this.templates=e.templates,this.currentTemplate=void 0},routes:{"":"home","work/:id/:section":"workScroll","work/:id":"detail",home:"home",work:"work",process:"process",contact:"contact"},home:function(){"home"!==this.currentTemplate&&(this.currentTemplate="home",this.$app.html(this.templates.home),window.scrollTo(0,0)),$(".menu__item").removeClass("menu__item--current"),$(".about").addClass("menu__item--current")},work:function(){"work"!==this.currentTemplate&&(this.currentTemplate="work",this.$app.html(this.templates.work)),$(".menu__item").removeClass("menu__item--current"),$(".work").addClass("menu__item--current"),$(".menu").show()},process:function(){"process"!==this.currentTemplate&&(this.currentTemplate="process",this.$app.html(this.templates.process)),$(".menu__item").removeClass("menu__item--current"),$(".process").addClass("menu__item--current"),$(".menu").show()},contact:function(){"contact"!==this.currentTemplate&&(this.currentTemplate="contact",this.$app.html(this.templates.contact)),$(".menu__item").removeClass("menu__item--current"),$(".contact").addClass("menu__item--current"),$(".menu").show()},workScroll:function(e,t){this.currentTemplate==="work-detail-"+e?$("html, body").animate({scrollTop:$("#"+t).position().top},1e3):this.work(e)},detail:function(e){if(this.currentTemplate!=="work-detail-"+e){this.currentTemplate="work-detail-"+e;var t=window.WORK.projects,r=_.findIndex(t,function(t){return t.id===e}),n=r<t.length-1?r+1:0,o=r>0?r-1:t.length-1,m=this.templates.detail({prevWork:t[o].id,nextWork:t[n].id,work:t[r]});this.$app.html(m),$(".menu__item").removeClass("menu__item--current"),$(".work").addClass("menu__item--current"),window.scrollTo(0,0)}}});$(document).ready(function(){new Router({app:$("#app"),templates:{home:$("#home-content").html(),work:_.template($("#work-content").html()),detail:_.template($("#work-detail-content").html()),process:_.template($("#process-content").html()),contact:_.template($("#contact-content").html())}});Backbone.history.start(),[].slice.call(document.querySelectorAll(".menu")).forEach(function(e){var t=e.querySelectorAll(".menu__link"),r=function(t){var r=t.target.parentNode;return!classie.has(r,"menu__item--current")&&(classie.remove(e.querySelector(".menu__item--current"),"menu__item--current"),void classie.add(r,"menu__item--current"))};[].slice.call(t).forEach(function(e){e.addEventListener("click",r)})})});