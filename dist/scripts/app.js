var Router=Backbone.Router.extend({initialize:function(t){this.$app=t.app,this.templates=t.templates,this.currentTemplate=void 0},routes:{"":"index","work/:id/:section":"workScroll","work/:id":"work",home:"index",work:"index",process:"index",room:"index",contact:"index"},index:function(){"index"!==this.currentTemplate&&(this.currentTemplate="index",this.$app.html(this.templates.index),$("a[href*=#]:not([href=#])").on("click",function(){if(location.pathname.replace(/^\//,"")==this.pathname.replace(/^\//,"")&&location.hostname==this.hostname){var t=$(this.hash);if(t=t.length?t:$("[name="+this.hash.slice(1)+"]"),t.length)return $("html, body").animate({scrollTop:t.offset().top-50},1e3),!1}}),$(window).scroll(function(){$(this).scrollTop()>200&&$(".navbar-scroll").fadeIn(500)}),$("body").scrollspy({target:"#my-nav",offset:50}))},workScroll:function(t,e){if(this.currentTemplate==="work-detail-"+t){var o=$("#"+e).position();window.scrollTo(0,o.top)}else this.work(t)},work:function(t){if(this.currentTemplate!=="work-detail-"+t){this.currentTemplate="work-detail-"+t;var e=window.WORK.projects,o=_.findIndex(e,function(e){return e.id===t}),n=o<e.length-1?o+1:0,i=o>0?o-1:e.length-1,r=this.templates.work({prevWork:e[i].id,nextWork:e[n].id,work:e[o]});this.$app.html(r),window.scrollTo(0,0)}}});$(document).ready(function(){new Router({app:$("#app"),templates:{index:$("#index-content").html(),work:_.template($("#work-detail-content").html())}});Backbone.history.start()});